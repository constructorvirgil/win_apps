<Window x:Class="WinApps.MessageCenter.OverlayToastWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        WindowStyle="None"
        ResizeMode="NoResize"
        AllowsTransparency="True"
        Background="Transparent"
        ShowInTaskbar="False"
        ShowActivated="False"
        Topmost="True">
  <Window.Resources>
    <LinearGradientBrush x:Key="CardBg" StartPoint="0,0" EndPoint="1,1">
      <GradientStop Color="#E6192139" Offset="0" />
      <GradientStop Color="#E60F1329" Offset="1" />
    </LinearGradientBrush>

    <LinearGradientBrush x:Key="AccentBg" StartPoint="0,0" EndPoint="1,1">
      <GradientStop Color="#FF4F46E5" Offset="0" />
      <GradientStop Color="#FF22D3EE" Offset="1" />
    </LinearGradientBrush>

    <Style x:Key="IconButton" TargetType="Button">
      <Setter Property="Background" Value="#00FFFFFF" />
      <Setter Property="BorderBrush" Value="#22FFFFFF" />
      <Setter Property="BorderThickness" Value="1" />
      <Setter Property="Foreground" Value="#E6FFFFFF" />
      <Setter Property="Cursor" Value="Hand" />
      <Setter Property="Focusable" Value="False" />
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="{x:Type Button}">
            <Border Background="{TemplateBinding Background}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}"
                    CornerRadius="10">
              <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
            </Border>
            <ControlTemplate.Triggers>
              <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Background" Value="#18FFFFFF" />
                <Setter Property="BorderBrush" Value="#33FFFFFF" />
              </Trigger>
              <Trigger Property="IsPressed" Value="True">
                <Setter Property="Background" Value="#24FFFFFF" />
              </Trigger>
            </ControlTemplate.Triggers>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>
  </Window.Resources>

  <Border x:Name="Root"
          Background="{StaticResource CardBg}"
          BorderBrush="#22FFFFFF"
          BorderThickness="1"
          CornerRadius="16"
          Padding="14"
          TextElement.FontFamily="Segoe UI, Microsoft YaHei UI"
          SnapsToDevicePixels="True">
    <Border.Effect>
      <DropShadowEffect BlurRadius="28" ShadowDepth="10" Opacity="0.38" Color="#FF000000" />
    </Border.Effect>
    <Border.RenderTransform>
      <TranslateTransform x:Name="SlideTransform" X="28" />
    </Border.RenderTransform>

    <Grid>
      <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="*" />
        <RowDefinition Height="Auto" />
      </Grid.RowDefinitions>
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="Auto" />
      </Grid.ColumnDefinitions>

      <Border Grid.Row="0"
              Grid.RowSpan="2"
              Grid.Column="0"
              Width="38"
              Height="38"
              Margin="0,0,12,0"
              CornerRadius="14"
              Background="{StaticResource AccentBg}">
        <Border.Effect>
          <DropShadowEffect BlurRadius="18" ShadowDepth="0" Opacity="0.55" Color="#FF22D3EE" />
        </Border.Effect>
        <Grid>
          <TextBlock Text="●"
                     FontSize="18"
                     Foreground="#F2FFFFFF"
                     HorizontalAlignment="Center"
                     VerticalAlignment="Center" />
        </Grid>
      </Border>

      <TextBlock x:Name="TitleText"
                 Grid.Row="0"
                 Grid.Column="1"
                 Margin="0,0,10,0"
                 FontSize="13.5"
                 FontWeight="SemiBold"
                 Foreground="#F2FFFFFF"
                 TextTrimming="CharacterEllipsis" />

      <Button x:Name="CloseButton"
              Grid.Row="0"
              Grid.Column="2"
              Width="26"
              Height="26"
              Style="{StaticResource IconButton}"
              FontSize="14"
              Content="×" />

      <TextBlock x:Name="MessageText"
                 Grid.Row="1"
                 Grid.Column="1"
                 Grid.ColumnSpan="2"
                 Margin="0,6,0,0"
                 FontSize="12"
                 Foreground="#B8FFFFFF"
                 TextWrapping="Wrap" />

      <Border Grid.Row="2"
              Grid.Column="0"
              Grid.ColumnSpan="3"
              Height="4"
              Margin="0,12,0,0"
              CornerRadius="3"
              Background="#14FFFFFF">
        <Grid ClipToBounds="True">
          <Border x:Name="ProgressFill"
                  CornerRadius="3"
                  Background="{StaticResource AccentBg}">
            <Border.RenderTransform>
              <ScaleTransform x:Name="ProgressScale" ScaleX="1" ScaleY="1" />
            </Border.RenderTransform>
            <Border.RenderTransformOrigin>0,0.5</Border.RenderTransformOrigin>
          </Border>
        </Grid>
      </Border>
    </Grid>
  </Border>
</Window>
